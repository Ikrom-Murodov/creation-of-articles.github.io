!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);var r=function(){function e(e){this.wrapperTabs=e.wrapperTabs,this.linkTabs=e.linkTabs,this.categoryTabs=e.categoryTabs,this.form=e.form,this.formTitle=e.formTitle,this.formDescription=e.formDescription,this.formType=e.formType,this.sectionPost=e.sectionPost,this.sectionFavorite=e.sectionFavorite,this.init()}var t=e.prototype;return t.init=function(){},t.wrapperTabsHandler=function(e){var t=e.target;this.linkTabs.forEach((function(e){e.classList.remove("section-tabs__link_active")})),t.classList.add("section-tabs__link_active"),this.categoryTabs.forEach((function(e){e.classList.add("hide"),t.getAttribute("data-name")==e.getAttribute("id")&&e.classList.remove("hide")}))},t.formError=function(){this.formTitle.value.length<3&&(this.formTitle.value="",this.formTitle.classList.add("errorForm"),this.formTitle.placeholder="Меньше чем трех символов вести нельзя"),this.formDescription.value.length<10&&(this.formDescription.value="",this.formDescription.classList.add("errorForm"),this.formDescription.placeholder="Меньше чем десяти символов вести нельзя")},t.formNoError=function(){this.formDescription.value="",this.formTitle.value="",this.formDescription.placeholder="Введите текст поста",this.formTitle.placeholder="Введите название"},t.formChange=function(e){e.classList.remove("errorForm")},t.showPost=function(e){for(var t in this.sectionPost.innerText="",e){var i=this.createElementPost(e[t].title,e[t].type,e[t].description,e[t].date,t);this.sectionPost.appendChild(i)}},t.showFavorite=function(e){var t=this;this.sectionFavorite.innerText="",e.forEach((function(e){var i=t.showFavoriteTemplate(e.title,e.type,e.description,e.date);t.sectionFavorite.appendChild(i)}))},t.showFavoriteTemplate=function(e,t,i,r){var n=document.createElement("div");return n.className="post wrapper-posts__post",n.innerHTML='\n      <div class="post__content">\n        <div class="post__wrapper-title">\n          <h3 class="post__title">'+e+'</h3>\n          <div class="post__type">'+t+'</div>\n        </div>\n        <div class="post__wrapper-description">\n          <span class="post__description">'+i+'</span>\n        </div>\n        <div class="post__wrapper-date">\n          <div class="post__date">'+r+"</div>\n        </div>\n      </div>",n},t.buttonSaveDataHandler=function(){document.querySelectorAll(".post__button-save").forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("id");if(t){var i=JSON.parse(localStorage.getItem("favorites"))||[];i.includes(t)?(e.textContent="Сохранить",e.classList.remove("test"),i=i.filter((function(e){return e!==t}))):(e.classList.add("test"),e.textContent="Удалить",i.push(t)),localStorage.setItem("favorites",JSON.stringify(i))}}))}))},t.createElementPost=function(e,t,i,r,n){var o=this.createElement({nameTag:"div",className:"post wrapper-posts__post"}),a=this.createElement({nameTag:"div",className:"post__content"}),s=this.createElement({nameTag:"div",className:"post__wrapper-title"}),c=this.createElement({nameTag:"h3",className:"post__title",innerTag:e}),l=this.createElement({nameTag:"div",className:"post__type",innerTag:t});this.elementAppendChild(s,c,l);var u=this.createElement({nameTag:"div",className:"post__wrapper-description"}),d=this.createElement({nameTag:"span",className:"post__description",innerTag:i});this.elementAppendChild(u,d);var p=this.createElement({nameTag:"div",className:"post__wrapper-date"}),f=this.createElement({nameTag:"div",className:"post__date",innerTag:r}),m=(JSON.parse(localStorage.getItem("favorites"))||[]).includes(n),h=this.createElement({nameTag:"button",className:"post__button-save",attributeName:"id",attributeValue:n,innerTag:m?"Удалить":"Сохранить"});return this.elementAppendChild(p,f,h),this.elementAppendChild(a,s,u,p),this.elementAppendChild(o,a),o},t.createElement=function(e){var t=document.createElement(e.nameTag);return t.className=e.className,t.innerText=e.innerTag||"",t.setAttribute(e.attributeName||"data-name",e.attributeValue||""),t},t.elementAppendChild=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];i.forEach((function(t){e.appendChild(t)}))},e}(),n=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=function(){function e(e){this.url=e.url}var t=e.prototype;return t.saveData=function(e){return n(this,void 0,void 0,(function*(){try{var t=yield fetch(this.url+"/posts.json",{method:"POST",body:JSON.stringify(e)});404==t.status&&console.log("Страница не найдено",t.url)}catch(e){console.log(new Error("Ошибка "+e))}}))},t.getData=function(){return n(this,void 0,void 0,(function*(){var e=yield fetch(this.url+"/posts.json");return yield e.json()}))},t.getDataFavorite=function(){return n(this,void 0,void 0,(function*(){var e=[],t=JSON.parse(localStorage.getItem("favorites"));if(t)for(var i=0;i<t.length;i++){var r=t[i],n=yield fetch(this.url+"/posts/"+r+".json"),o=yield n.json();e.push(o)}return e}))},e}(),a=function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};new(function(){function e(e){this.Model=e.Model,this.View=e.View,this.init()}var t=e.prototype;return t.init=function(){var e=this;this.View.wrapperTabs.addEventListener("click",(function(t){e.wrapperTabsHandler(t)})),this.View.form.addEventListener("submit",(function(){e.formHandler(event)})),this.View.formDescription.addEventListener("change",(function(){e.View.formChange(e.View.formDescription)})),this.View.formTitle.addEventListener("change",(function(){e.View.formChange(e.View.formTitle)}))},t.wrapperTabsHandler=function(e){return a(this,void 0,void 0,(function*(){if("A"===e.target.tagName&&this.View.wrapperTabsHandler(e),"favorite"===e.target.getAttribute("data-name")){var t=yield this.Model.getDataFavorite();this.View.showFavorite(t)}if("post"===e.target.getAttribute("data-name")){var i=yield this.Model.getData();this.View.showPost(i),this.View.buttonSaveDataHandler()}}))},t.formHandler=function(e){if(e.preventDefault(),this.View.formTitle.value.length<3||this.View.formDescription.value.length<10)this.View.formError();else{var t={title:this.View.formTitle.value,description:this.View.formDescription.value,type:this.View.formType.value,date:(new Date).toLocaleDateString()};this.Model.saveData(t),this.View.formNoError()}},e}())({Model:new o({url:"https://post-fb8f6.firebaseio.com/"}),View:new r({wrapperTabs:document.querySelector(".section-tabs__wrapper-item"),linkTabs:document.querySelectorAll(".section-tabs__link"),categoryTabs:document.querySelectorAll("#create, #post, #favorite"),form:document.querySelector(".form"),formTitle:document.querySelector(".form__input-title"),formDescription:document.querySelector(".form__input-textarea"),formType:document.querySelector(".form__type-post"),sectionPost:document.querySelector(".wrapper-posts"),sectionFavorite:document.querySelector(".favorite")})});document.querySelector(".section").classList.add("hide"),localStorage.getItem("visited")?(document.querySelector(".header").classList.add("hide"),document.querySelector(".section").classList.remove("hide")):document.querySelector(".header__button").addEventListener("click",(function(){document.querySelector(".header").classList.add("hide"),localStorage.setItem("visited",JSON.stringify(!0)),document.querySelector(".section").classList.remove("hide")}))}]);